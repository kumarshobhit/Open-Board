<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <div class="toolbar">
        <div class="tool" id="pencil">
            <img src="./NewIcons/Black_Pencil.svg" alt="" class="tool-image">
            <div class="size-box">
                <div class="size1 size"></div>
                <div class="size2 size"></div>
                <div class="size3 size"></div>
                <div class="size4 size"></div>
            </div>

        </div>
        <div class="tool" id="eraser" class="tool-image">
            <img src="./NewIcons/Eraser.svg" alt="" class="tool-image">
            <div class="size-box">
                <div class="size1 size"></div>
                <div class="size2 size"></div>
                <div class="size3 size"></div>
                <div class="size4 size"></div>
            </div>
        </div>
        <div class="tool" id="rect" class="tool-image">
            <!-- <img src="./NewIcons/CloseButton.svg" alt="" class="tool-image"> -->
            <i class="fas fa-square"></i>
            <div class="size-box">
                <div class="size1 size"></div>
                <div class="size2 size"></div>
                <div class="size3 size"></div>
                <div class="size4 size"></div>
            </div>
        </div>
        <div class="tool" id="line"">
            <!-- <img src=" ./NewIcons/MoveIcon.svg" alt="" class="tool-image"> -->
            <i class="fas fa-grip-lines-vertical"></i>
            <div class="size-box">
                <div class="size1 size"></div>
                <div class="size2 size"></div>
                <div class="size3 size"></div>
                <div class="size4 size"></div>
            </div>
        </div>
        <div class="color-container tool">
            <div class="color red"></div>
            <div class="color blue"></div>
            <div class="color green"></div>
        </div>
    </div>
    <canvas></canvas>
</body>


<!-- variable declare -->

<script>
    let canvasBoard = document.querySelector("canvas")
    let body = document.querySelector("body")
    let cTool = "pencil"
    canvasBoard.height = window.innerHeight
    canvasBoard.width = window.innerWidth
    let tool = canvasBoard.getContext("2d")
    tool.strokeStyle = "lightpink"

</script>

<!-- pencil rect line code -->
<script>
    let boardTop = canvasBoard.getBoundingClientRect().top
    let boardLeft = canvasBoard.getBoundingClientRect().left
    let iX, iY, fX, fY
    let drawingMode = false

    body.addEventListener("mousedown", function (e) {
        // console.log(e)
        iX = e.clientX
        iY = e.clientY - boardTop
        if (cTool == "pencil") {
            drawingMode = true;
            tool.beginPath();
            tool.moveTo(iX, iY);
        }
    })

    body.addEventListener("mouseup", function (e) {

        if (cTool == "pencil") {
            drawingMode = false
        }

        else if (cTool == "rect" || cTool == "line") {
            fX = e.clientX
            fY = e.clientY
            let width = fX - iX
            let height = fY - iY
            if (cTool == 'rect') {
                tool.strokeRect(iX, iY, width, height)
            }
            else if (cTool == 'line') {
                tool.beginPath()
                tool.moveTo(iX, iY)
                tool.lineTo(fX, fY)
                tool.stroke()
                console.log("line tool")
            }
        }

    })

    body.addEventListener("mousemove", function (e) {
        if (drawingMode == false) return
        fX = e.clientX
        fY = e.clientY - boardTop
        tool.lineTo(fX, fY)
        tool.stroke()
        iX = fX
        iY = fY
    })
</script>

<!-- tool change -->
<script>
    let pencil = document.querySelector('#pencil')
    let eraser = document.querySelector('#eraser')
    let rect = document.querySelector('#rect')
    let line = document.querySelector('#line')
    let options = document.querySelectorAll('.size-box')
    // let cTool = 'pencil'

    // identify->click->click again   
    pencil.addEventListener("click", () => {
        if (cTool == 'pencil') {
            // second click 
            // options show
            options[0].style.display = 'flex';
        }
        else {
            cTool = 'pencil';
            for (let i = 0; i < options.length; i++) {
                options[i].style.display = 'none'
            }
        }
    })

    eraser.addEventListener("click", () => {
        if (cTool == 'eraser') {
            // second click 
            // options show
            options[1].style.display = 'flex';
        }
        else {
            cTool = 'eraser';
            for (let i = 0; i < options.length; i++) {
                options[i].style.display = 'none'
            }
        }
    })

    rect.addEventListener("click", () => {
        if (cTool == 'rect') {
            // second click 
            // options show
            options[2].style.display = 'flex';
        }
        else {
            cTool = 'rect';
            for (let i = 0; i < options.length; i++) {
                options[i].style.display = 'none'
            }
        }
    })

    line.addEventListener("click", () => {
        if (cTool == 'line') {
            // second click 
            // options show
            options[3].style.display = 'flex';
        }
        else {
            cTool = 'line';
            for (let i = 0; i < options.length; i++) {
                options[i].style.display = 'none'
            }
        }
    })

</script>

<script>

    let redButton = document.querySelector('.red')
    let greenButton = document.querySelector('.green')
    let blueButton = document.querySelector('.blue')

    redButton.addEventListener('click', () => {
        tool.strokeStyle = "lightpink"
    })

    greenButton.addEventListener('click', () => {
        tool.strokeStyle = "green"
    })

    blueButton.addEventListener('click', () => {
        tool.strokeStyle = "lightblue"
    })
</script>

</html>